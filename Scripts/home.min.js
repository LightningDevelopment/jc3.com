function prepareHashLinks(){$("a[href*='#']:not([href='#'])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){closeOverlay();var e=$(this.hash).length?$(this.hash):$("[name='"+this.hash.slice(1)+"']");if(e.length)return"#home"==this.hash?$("html, body").animate({scrollTop:0},1e3):$("html, body").animate({scrollTop:e.offset().top-$("header").height()+.5},1e3),!1}})}function openOverlay(e,i){"resume"==e&&($("#resume").show(),$("#overlaycontainer").hide()),overlayScroll=$(window).scrollTop(),$("html, body").css("top",-overlayScroll),$("html, body").addClass("noscroll"),$("#overlayheader h1").html(e),$("#overlaycontent").html(i),prepareHashLinks(),$("#overlayclose, #overlay").fadeIn(250)}function closeOverlay(){$("html").hasClass("noscroll")&&($("html, body").removeClass("noscroll"),$("html, body").css("top","auto"),$(window).scrollTop(overlayScroll),$(window).trigger("scroll"),$("#overlay").fadeOut(250),$("#overlayclose").fadeOut(250,function(){$("#overlayheader h1").html(""),$("#overlaycontent").html(""),$("#resume").hide(),$("#overlaycontainer").show()}))}function manageSlides(e){$("#"+e+" .arrow").each(function(i){$(this).click(function(){void 0==$("#"+e).data("slideNum")?slideNum=0:slideNum=$("#"+e).data("slideNum"),0!=$(this).css("opacity")&&(0==i?slideNum--:slideNum++,$("#"+e+" .arrow").css("opacity",""),slideNum>=$("#"+e+" .slide").length-1?(slideNum=$("#"+e+" .slide").length-1,$("#"+e+" .arrow").eq(1).css("opacity",0)):slideNum<=0&&(slideNum=0,$("#"+e+" .arrow").eq(0).css("opacity",0)),$("#"+e+" .slides").css("transform","translateX(-"+slideNum*$(window).outerWidth()+"px) translateZ(0px)"),$("#"+e).data("slideNum",slideNum))})})}function updateSlideWidth(){$(".slides").css("transition","none"),$(".slide").width($(window).outerWidth()),$("section").has(".slides").each(function(){$(this).find(".slides").width($(window).outerWidth()*$(this).find(".slide").length),$(this).find(".slides").css("transform","translateX(-"+$(this).data("slideNum")*$(window).outerWidth()+"px) translateZ(0px)")}),$(".slides").css("transition","")}function resizing(){$(".slide").width()!=$(window).outerWidth()&&updateSlideWidth(),$("#home").height()!=$("header").height()&&($("#home").height($("header").height()),$("section").css("min-height",$(window).outerHeight()-$("header").outerHeight()),$("section#contact, #valignghost").css("min-height",$(window).outerHeight()-$("header").outerHeight()-$("footer").outerHeight()),void 0!=focus&&void 0!=scrollOffset&&focus>0&&$("html, body").scrollTop((focus+scrollOffset)*($(window).outerHeight()-$("header").outerHeight())))}function scrolling(){if(!$("body").hasClass("noscroll")){var e=$(window).scrollTop()+$("header").height();e<.4*window.innerHeight?$("#links").width("100%"):e>=.4*window.innerHeight&&e<window.innerHeight?$("#links").width(100*(5/3)*(1-e/window.innerHeight)+"%"):$("#links").width("0%"),$("section").each(function(i){e>=$(this).offset().top-($(window).outerHeight()-$("header").outerHeight())/3&&(focus=i)}),scrollOffset=(e-$("section").eq(focus).offset().top)/($(window).outerHeight()-$("header").outerHeight()),$("header a").each(function(){this.hash=="#"+$("section")[focus].id?$(this).css("color","#FFF"):$(this).attr("style","")})}}var overlayScroll,focus,scrollOffset;$(function(){prepareHashLinks(),autosize($("textarea#message")),dynamicInputs=$("#name, #email, #message"),dynamicInputs.each(function(){this.initVal=$(this).val(),$(this).focus(function(){$(this).val()==this.initVal&&$(this).val("").toggleClass("ghost")}),$(this).blur(function(){""==$(this).val()&&$(this).val(this.initVal).toggleClass("ghost")})}),$("form#form").submit(function(e){e.preventDefault(),$("#response").hide(),dynamicInputs.each(function(){$(this).val()==this.initVal&&$(this).val("")}),$.post(window.location.pathname,$("form#form").serialize(),function(e){"success"==e?($("#response").html("Your message was sent."),$("#form, #valignme h1").hide()):$("#response").html("One or more fields are invalid."),$("#response").show()}),dynamicInputs.each(function(){""==$(this).val()&&$(this).val(this.initVal)})}),manageSlides("dev"),manageSlides("music"),$("a.slidelink").click(function(){openOverlay($(".slidecontent",$(this)).data("header"),$(".slidecontent",$(this)).data("content"))}),$("#overlayclose, #overlayexit").click(closeOverlay),updateSlideWidth(),$(window).resize(resizing),$(window).bind("scroll scrollstart scrollstop touchend touchmove touchstart",scrolling),$(window).trigger("resize"),$(window).trigger("scroll"),setTimeout(resizing,100),setTimeout(scrolling,100),$("form#form input, form#form textarea").blur(function(){resizing(),scrolling()}),"#resume"==location.hash&&openOverlay("resume","")}),$(window).load(function(){$(window).trigger("resize"),$(window).trigger("scroll"),$("header").css("z-index","11")});